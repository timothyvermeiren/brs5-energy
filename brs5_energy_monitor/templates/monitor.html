{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>
        BRS5 Energy Monitor
    </title>

    <meta charset="utf-8">

    {% block stylesheets %}
        <!-- <link rel="stylesheet" href="{% static '/fonts/fontawesome/css/fontawesome-all.min.css' %}"> -->
        <link rel="stylesheet" href="{% static '/plugins/bootstrap/css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static '/plugins/animate/css/animate.min.css' %}">
        <link rel="stylesheet" href="{% static '/plugins/fontawesome/css/solid.css' %}">
        <link rel="stylesheet" href="{% static '/plugins/fontawesome/css/fontawesome.css' %}">
        <link rel="stylesheet" href="{% static '/css/base.css' %}">
    {% endblock stylesheets %}

    {% block fonts %}
        <!-- None for now -->
    {% endblock fonts %}

</head>
<body>

    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <p class="message {% if message.tags %} {{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </div>
    {% endif %}
    
    {% block content %}

    <div class="container-fluid">

        <!-- Top row: BANs -->
        <div class="row">

            <!-- Top left: Productie & Verbruik -->
            <div class="col-4 prover">

                <div id="productie" class="row p-3 align-items-center text-center">
                    <div class="col-3">
                        <i class="fa-solid fa-sun"></i>
                    </div>
                    <div class="col-9 text-center">
                        <div class="row">Productie</div>
                        <div class="row productieLabel" id="productieLabel">{{ productie_current.value }} {{ productie_current.unit }}</div>
                    </div>
                </div>
                
                <div id="verbruik" class="row p-3 align-items-center text-center">
                    <div class="col-3">
                        <i class="fa-solid fa-plug"></i>
                    </div>
                    <div class="col-9 text-center">
                        <div class="row">Verbruik</div>
                        <div class="row verbruikLabel" id="verbruikLabel">{{ verbruik_current.value }} {{ verbruik_current.unit }}</div>
                    </div>
                </div>

            </div>

            <!-- Top right: Resultaat -->
            <div id="resultaat" class="col-8 p-3 resultaat">
                <div class="row align-items-center h-100">
                    <div class="col-3 text-center">
                        <div id="resultaatIndicatorPositive" class="fa-solid fa-arrow-up d-none"></div>
                        <div id="resultaatIndicatorNegative" class="fa-solid fa-arrow-down d-none"></div>
                    </div>
                    <div class="col-9">
                        <!-- <div class="d-block">Resultaat</div> -->
                        <div class="d-inline resultaatLabel" id="resultaatLabelValue">{{ resultaat_current.value }}</div>
                        <div class="d-inline resultaatLabel" id="resultaatLabelUnit">{{ resultaat_current.unit }}</div>
                        <div class="d-block resultaatLabel" id="resultaatLabelLabel">{{ resultaat_current.label }}</div>
                    </div>
                </div>
            </div>    

        </div>

        <!-- Middle row: History -->
        <div class="row">

            <!-- Top left: Productie & Verbruik -->
            <div class="col-12 history">
                <canvas id="historyChart"></canvas>
            </div>

        </div>

    </div>

    
    <!-- Don't display afname/injectie separately for now -->
    <!-- 
    <div id="afname">
        <div class="afnameLabelLabel">Afname</div>
        <div class="afnameLabel" id="afnameLabel">{{ afname_current.value }} {{ afname_current.unit }}</div>
    </div>

    <div id="injectie">
        <div class="injectieLabelLabel">Injectie</div>
        <div class="injectieLabel" id="injectieLabel">{{ injectie_current.value }} {{ injectie_current.unit }}</div>
    </div> 
    -->
    
    {% endblock content %}
    
    {% block javascripts %}
        <script src="{% static '/plugins/jquery/js/jquery.min.js' %}"></script>
        <script src="{% static '/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="{% static '/js/monitor_ui.js' %}"></script>
    {% endblock javascripts %}

    <!-- If we were loading the page for first time, we'll have history data, so initialize the chart with it -->
    <script>
            {% if resultaat_history %}
                const resultaat_history_data = '{{ resultaat_history|safe }}';
            {% endif %}
            {% if verbruik_history %}
                const verbruik_history_data = '{{ verbruik_history|safe }}';
            {% endif %}
        </script>

</body>
</html>